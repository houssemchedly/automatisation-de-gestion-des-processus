<div class="modal-overlay">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Create a new task</h4>
        <p class="modal-subtitle">Create a new task for your board. Fill in the details below.</p>
        <button type="button" class="btn-close" (click)="closeThisModal()">
          <fa-icon [icon]="faClose"></fa-icon>
        </button>
      </div>

      <div class="modal-body">
        <form (ngSubmit)="submitForm()">
          <!-- Task Title -->
          <div class="form-group">
            <label for="taskTitle" class="form-label">Task Title *</label>
            <input
              type="text"
              id="taskTitle"
              class="form-control"
              [(ngModel)]="task.title"
              name="title"
              placeholder="Enter task title..."
              required>
          </div>

          <!-- Description -->
          <div class="form-group">
            <label for="taskDescription" class="form-label">Description</label>
            <textarea
              id="taskDescription"
              class="form-control textarea"
              [(ngModel)]="task.description"
              name="description"
              placeholder="Enter task description..."
            rows="4"></textarea>
          </div>

          <!-- Priority and Status Row -->
          <div class="form-row">
            <div class="form-group">
              <label for="taskPriority" class="form-label">Priority</label>
              <select
                id="taskPriority"
                class="form-control"
                [(ngModel)]="task.priority"
                name="priority">
                <option [value]="priorityEnum.low">Low</option>
                <option [value]="priorityEnum.medium">Medium</option>
                <option [value]="priorityEnum.high">High</option>
              </select>
            </div>

            <div class="form-group">
              <label for="taskStatus" class="form-label">Status</label>
              <select
                id="taskStatus"
                class="form-control"
                [(ngModel)]="task.column"
                name="status">
                @for (col of columns; track col; let i = $index) {
                  <option [value]="i">
                    {{col.name}}
                  </option>
                }
              </select>
            </div>
          </div>

          <!-- Assignee and Due Date Row -->
          <div class="form-row">
            <div class="form-group">
              <label for="taskAssignee" class="form-label">Assignee</label>
              <select
                id="taskAssignee"
                class="form-control"
                [(ngModel)]="task.assignee"
                name="assignee">
                <option value="">Select assignee</option>
                <option value="John Doe">John Doe</option>
                <option value="Jane Smith">Jane Smith</option>
                <option value="Mike Johnson">Mike Johnson</option>
              </select>
            </div>

            <div class="form-group">
              <label for="taskDueDate" class="form-label">Due Date</label>
              <input
                type="date"
                id="taskDueDate"
                class="form-control"
                [(ngModel)]="task.dueDate"
                name="dueDate"
                placeholder="Pick a date">
            </div>
          </div>

          <!-- Labels -->
          <div class="form-group">
            <label class="form-label">Labels</label>
            <div class="label-input-group">
              <input
                type="text"
                class="form-control"
                [(ngModel)]="newLabel"
                name="newLabel"
                placeholder="Add new label..."
                (keyup.enter)="addLabel()">
              <button type="button" class="btn btn-primary" (click)="addLabel()">Add</button>
            </div>

            <div class="labels-container">
              @for (label of availableLabels; track label) {
                <span
                  class="label-tag"
                  [class.selected]="isLabelSelected(label)"
                  (click)="toggleLabel(label)">
                  {{label}}
                </span>
              }
            </div>
          </div>

          <!-- Submit Button -->
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeThisModal()">Cancel</button>
            <button type="submit" class="btn btn-primary">
              <fa-icon [icon]="faSave"></fa-icon>
              Create Task
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
